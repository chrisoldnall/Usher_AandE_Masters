#  geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
aeScotlandJan2019toDec2022
ggplot(data=ae_monthly_totalJan2019toDec2022, aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
facet_wrap(~Year)+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2019-01-01"), as.Date("2019-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2020-01-01"), as.Date("2020-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2020-03-23"), color="orange", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-02-01"), color="orange", y=70000, size=3, label="23/3/20 UK Lockdown")+
geom_vline(xintercept = as.Date("2020-05-29"), color="brown", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-04-01"), color="brown", y=75000, size=3, label="29/5/20 Phase 1")+
geom_vline(xintercept = as.Date("2020-06-19"), color="blue", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-05-01"), color="blue", y=80000, size=3, label="19/6/20 Phase 2")+
geom_vline(xintercept = as.Date("2020-07-10"), color="magenta4", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-06-01"), color="magenta4", y=85000, size=3, label="10/7/20 Phase 3")+
geom_vline(xintercept = as.Date("2020-09-23"), color="purple4", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-08-01"), color="purple4", y=90000, size=3, label="23/9/20 Scottish restrictions")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2020-01-01"), as.Date("2020-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2020-03-23"), color="orange", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-03-01"), color="orange", y=70000, size=3, label="23/3/20 UK Lockdown")+
geom_vline(xintercept = as.Date("2020-05-29"), color="brown", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-05-01"), color="brown", y=75000, size=3, label="29/5/20 Phase 1")+
geom_vline(xintercept = as.Date("2020-06-19"), color="blue", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-06-01"), color="blue", y=80000, size=3, label="19/6/20 Phase 2")+
geom_vline(xintercept = as.Date("2020-07-10"), color="magenta4", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-07-01"), color="magenta4", y=85000, size=3, label="10/7/20 Phase 3")+
geom_vline(xintercept = as.Date("2020-09-23"), color="purple4", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-09-01"), color="purple4", y=90000, size=3, label="23/9/20 Scottish restrictions")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2019-01-01"), as.Date("2019-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=3, label="5/1/21 Scottish mainland lockdown")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=3, label="5/1/21 Scot mainland lockdown")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=3, label="5/1/21 Scottish mainland lockdown")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=1.5, label="5/1/21 Scottish mainland lockdown")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=3, label="5/1/21 Scottish mainland lockdown")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=3, label="Scottish mainland lockdown 5/1/21 ")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=3, label="Scottish mainland lockdown 5/1/21 ")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-06-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-08-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2022-01-01"), as.Date("2022-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
aeScotland2019 <-ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2019-01-01"), as.Date("2019-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
aeScotland2019
save_plot("Output/aeScotland2019.svg", fig=aeScotland2019, width=14, height=12)
aeScotland2020<- ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2020-01-01"), as.Date("2020-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2020-03-23"), color="orange", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-03-01"), color="orange", y=70000, size=3, label="23/3/20 UK Lockdown")+
geom_vline(xintercept = as.Date("2020-05-29"), color="brown", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-05-01"), color="brown", y=75000, size=3, label="29/5/20 Phase 1")+
geom_vline(xintercept = as.Date("2020-06-19"), color="blue", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-06-01"), color="blue", y=80000, size=3, label="19/6/20 Phase 2")+
geom_vline(xintercept = as.Date("2020-07-10"), color="magenta4", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-07-01"), color="magenta4", y=85000, size=3, label="10/7/20 Phase 3")+
geom_vline(xintercept = as.Date("2020-09-23"), color="purple4", linewidth=.5)+
annotate(geom="text", x=as.Date("2020-09-01"), color="purple4", y=90000, size=3, label="23/9/20 Scottish restrictions")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
save_plot("Output/aeScotland2020.svg", fig=aeScotland2020, width=14, height=12)
aeScotland2021 <-ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2021-01-01"), as.Date("2021-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-01-01"), color="forestgreen", y=95000, size=3, label="Scottish mainland lockdown 5/1/21 ")+
geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-04-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-05-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-06-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-07-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
annotate(geom="text", x=as.Date("2021-08-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
save_plot("Output/aeScotland2021.svg", fig=aeScotland2021, width=14, height=12)
aeScotland2022 <-ae_monthly_totalJan2019toDec2022 %>%
filter(between(MonthEndingDate, as.Date("2022-01-01"), as.Date("2022-12-31"))) %>%
ggplot(aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
save_plot("Output/aeScotland2022.svg", fig=aeScotland2022, width=14, height=12)
ggplot(data=ae_monthly_totalJan2019toDec2022, aes(x=MonthEndingDate, y=NumberOfAttendancesAll))+
geom_point()+
geom_line()+
facet_wrap(~Year)+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
aeScotlandJan2019toDec2022<- ggplot(data=ae_monthly_totalJan2019toDec2022, aes(x=Month, y=NumberOfAttendancesAll, group = Year, color = Year))+
geom_point()+
geom_line()+
#  geom_vline(xintercept = as.Date("2020-03-23"), color="orange", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2020-02-01"), color="orange", y=70000, size=3, label="23/3/20 UK Lockdown")+
#  geom_vline(xintercept = as.Date("2020-05-29"), color="brown", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2020-04-01"), color="brown", y=75000, size=3, label="29/5/20 Phase 1")+
#  geom_vline(xintercept = as.Date("2020-06-19"), color="blue", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2020-05-01"), color="blue", y=80000, size=3, label="19/6/20 Phase 2")+
#  geom_vline(xintercept = as.Date("2020-07-10"), color="magenta4", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2020-06-01"), color="magenta4", y=85000, size=3, label="10/7/20 Phase 3")+
#  geom_vline(xintercept = as.Date("2020-09-23"), color="purple4", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2020-08-01"), color="purple4", y=90000, size=3, label="23/9/20 Scottish restrictions")+
#  geom_vline(xintercept = as.Date("2021-01-05"), color="forestgreen", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2020-12-01"), color="forestgreen", y=95000, size=3, label="5/1/21 Scottish mainland lockdown")+
#  geom_vline(xintercept = as.Date("2021-04-02"), color="cornflowerblue", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2021-03-01"), color="cornflowerblue", y=100000, size=3, label="2/4/21 Stay home>local")+
#  geom_vline(xintercept = as.Date("2021-04-26"), color="tomato1", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2021-03-01"), color="tomato1", y=105000, size=3, label="26/4/21 Level 3")+
#  geom_vline(xintercept = as.Date("2021-05-17"), color="royalblue4", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2021-04-01"), color="royalblue4", y=110000, size=3, label="17/5/21 Level 2")+
#  geom_vline(xintercept = as.Date("2021-06-05"), color="firebrick2", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2021-05-01"), color="firebrick2", y=115000, size=3, label="17/5/21 Most mainland level 1")+
#  geom_vline(xintercept = as.Date("2021-07-19"), color="sienna", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2021-06-01"), color="sienna", y=120000, size=3, label="19/7/21 Level 0")+
#  geom_vline(xintercept = as.Date("2021-08-09"), color="springgreen4", linewidth=.5)+
#  annotate(geom="text", x=as.Date("2021-07-01"), color="springgreen4", y=125000, size=3, label="9/8/21 Beyond level 0")+
labs(x= "Month",
y = "Total number of Scottish A&E attendance")
save_plot("Output/aeScotlandJan2019toDec2022.svg", fig=aeScotlandJan2019toDec2022, width=14, height=12)
library(tidyverse)
library(here)
library(readxl)
library(dplyr)
library(ggplot2)
library(lubridate)
library(sf)
library(scales)
library(sjPlot)
#POPULATION ESTIMATE
#Loading population estimate (only till 2022) csv file
Covid_HBpopulation_estimate <- read_csv(here("Rawdata", "20240809Popestimate_HB2019_1981to2022.csv"))
View(Covid_HBpopulation_estimate)
View(HBUpdatespopulation_estimate_HBname)
View(Covid_HBpopulation_estimate)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
View(Covid_monthlyae_activity)
View(Covid_monthlyae_activity)
str(Covid_monthlyae_activity)
View(Covid_monthlyae_activity)
library(tidyverse)
library(here)
library(readxl)
library(dplyr)
library(ggplot2)
library(lubridate)
library(sf)
library(scales)
library(sjPlot)
#POPULATION ESTIMATE
#Loading population estimate (only till 2022) csv file
Covid_HBpopulation_estimate <- read_csv(here("Rawdata", "20240809Popestimate_HB2019_1981to2022.csv"))
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(HB=="S92000003"| Sex="All")
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(HB=="S92000003"| Sex=="All")
View(Covid_HBpopulation_estimate)
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(HB=="S92000003", Sex=="All")
View(Covid_HBpopulation_estimate)
View(HB_names)
View(ae_byboard_population)
View(ae_byboard_population)
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges)
View(Covid_HBpopulation_estimate)
#POPULATION ESTIMATE
#Loading population estimate (only till 2022) csv file
Covid_HBpopulation_estimate <- read_csv(here("Rawdata", "20240809Popestimate_HB2019_1981to2022.csv"))
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges)
View(Covid_HBpopulation_estimate)
#POPULATION ESTIMATE
#Loading population estimate (only till 2022) csv file
Covid_HBpopulation_estimate <- read_csv(here("Rawdata", "20240809Popestimate_HB2019_1981to2022.csv"))
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(Sex=="All")
View(Covid_HBpopulation_estimate)
#POPULATION ESTIMATE
#Loading population estimate (only till 2022) csv file
Covid_HBpopulation_estimate <- read_csv(here("Rawdata", "20240809Popestimate_HB2019_1981to2022.csv"))
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(HB==!"S92000003", Sex=="All")
View(Covid_HBpopulation_estimate)
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(HB==!"S92000003", Sex=="All")
View(Covid_HBpopulation_estimate)
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(HB!=="S92000003", Sex=="All")
#POPULATION ESTIMATE
#Loading population estimate (only till 2022) csv file
Covid_HBpopulation_estimate <- read_csv(here("Rawdata", "20240809Popestimate_HB2019_1981to2022.csv"))
#Filtering total Scottish estimates (HB S92000003) for each year
Covid_HBpopulation_estimate <- Covid_HBpopulation_estimate %>%
select(Year, HB, Sex, AllAges) %>%
filter(!HB=="S92000003", Sex=="All")
View(Covid_HBpopulation_estimate)
#Dataframe with the names of the health boards
HB_names <- read_csv(here("Rawdata", "HealthBoard_2014_2019_names.csv"))
HB_names_only<-HB_names %>%
select(HB, HBName)
View(HB_names)
View(HB_names_only)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
View(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(Month, HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll) %>%
group_by(Month, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll), PercentageWithin4HoursAll=sum(PercentageWithin4HoursAll))
View(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
View(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(Month, HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll) %>%
group_by(Month, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll),
PercentageWithin4HoursAll=mean(PercentageWithin4HoursAll))
View(Covid_monthlyae_activity)
str(Covid_monthlyae_activity)
Covid_monthlyae_activity$Date <- paste(Covid_monthlyae_activity$Month,"01")
View(Covid_monthlyae_activity)
?as.Date
#Month returns as numeric. Lubridate cannot handle just year and month, need to introduce and artificial day of the month to the string
Covid_monthlyae_activity$Month <- format(as.Date(Covid_monthlyae_activity$Month, format="%Y/%m/%d"))
str(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
#Attendance and percentage within 4 hours by HB each month
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(Month, HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll) %>%
group_by(Month, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll),
PercentageWithin4HoursAll=mean(PercentageWithin4HoursAll))
str(Covid_monthlyae_activity)
Covid_monthlyae_activity$Date <- paste(Covid_monthlyae_activity$Month,"01")
Covid_monthlyae_activity$Date <- format(as.Date(Covid_monthlyae_activity$Date, format="%Y/%m/%d"))
str(Covid_monthlyae_activity)
View(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
#Attendance and percentage within 4 hours by HB each month
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(Month, HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll) %>%
group_by(Month, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll),
PercentageWithin4HoursAll=mean(PercentageWithin4HoursAll))
View(Covid_monthlyae_activity)
str(Covid_monthlyae_activity)
View(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
#Attendance and percentage within 4 hours by HB each month
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(Month, HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll) %>%
group_by(Month, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll),
PercentageWithin4HoursAll=mean(PercentageWithin4HoursAll))
Covid_monthlyae_activity$Year <- substr(Covid_monthlyae_activity$Date, 1,4)
Covid_monthlyae_activity$Year <- substr(Covid_monthlyae_activity$Month, 1,4)
str(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
#creating a new column for Year using the first 4 digits of the Month column
Covid_monthlyae_activity$Year <- substr(Covid_monthlyae_activity$Month, 1,4)
View(Covid_monthlyae_activity)
#Attendance and percentage within 4 hours by HB each month
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(Month, HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll, Year) %>%
group_by(Year, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll),
PercentageWithin4HoursAll=mean(PercentageWithin4HoursAll))
View(Covid_monthlyae_activity)
View(Covid_HBpopulation_estimate)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
#creating a new column for Year using the first 4 digits of the Month column
Covid_monthlyae_activity$Year <- substr(Covid_monthlyae_activity$Month, 1,4)
#Attendance and percentage within 4 hours by HB each month
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(Month, HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll, Year) %>%
group_by(Year, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll),
PercentageWithin4HoursAll=mean(PercentageWithin4HoursAll))
View(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
#creating a new column for Year using the first 4 digits of the Month column
Covid_monthlyae_activity$Year <- substr(Covid_monthlyae_activity$Month, 1,4)
Covid_monthlyae_activity$month <- substr(Covid_monthlyae_activity$Month, 5,6)
#Attendance and percentage within 4 hours by HB each month
Covid_monthlyae_activity <- Covid_monthlyae_activity %>%
select(HBT, NumberOfAttendancesAll, PercentageWithin4HoursAll, Year, month) %>%
group_by(Year, HBT) %>%
summarise(NumberOfAttendancesAll=sum(NumberOfAttendancesAll),
PercentageWithin4HoursAll=mean(PercentageWithin4HoursAll))
str(Covid_monthlyae_activity)
View(Covid_monthlyae_activity)
#Loading A&E monthly attendance and waiting times csv file
Covid_monthlyae_activity <- read_csv(here("Rawdata", "monthlyae_activity_202406.csv"))
View(Covid_monthlyae_activity)
#creating a new column for Year using the first 4 digits of the Month column
Covid_monthlyae_activity$Year <- substr(Covid_monthlyae_activity$Month, 1,4)
Covid_monthlyae_activity$month <- substr(Covid_monthlyae_activity$Month, 5,6)
View(Covid_monthlyae_activity)
